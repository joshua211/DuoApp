@page "/"
@inject IDuolingoClient client
@inject IValuePersistence persistence
@inject NavigationManager nav

skills

@code {

    List<Skill> skills;

    protected async override Task OnInitializedAsync()
    {
        var username = await persistence.GetValueAsync("username");
        if(!string.IsNullOrEmpty(username))
            await client.Authenticate(username);

        if(!client.IsAuthenticated)
            nav.NavigateTo("/login");
         else
            skills = (await client.GetSkillsAsync()).ToList();
    }

}